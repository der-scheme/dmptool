<%
 # This partial takes locals variables for guidance collection called "templates"
  # it also takes a variable called public with values true or false since
  # the layout differs for public items from the institution-only guidance
%>

<table class="table table-striped">
	<thead>
		<tr>
			<th><%= sortable :name,                    t('.template'),                                     model: RequirementsTemplate, order_scope: :order_scope1 %></th>
			<th><%= sortable :institution_id,          t(public ? '.funder' : '.institution'),             model: RequirementsTemplate, order_scope: :order_scope1 %></th>
			<th><%= sortable :additional_informations, t(public ? '.funder_links' : '.institution_links'), model: RequirementsTemplate, order_scope: :order_scope1 %></th>
			<th>
				<%=   sortable :sample_plans,            t('.sample_plans'),                                 model: RequirementsTemplate, order_scope: :order_scope1 %>
      	<%= content_tag :span, '', title: t('.sample_plans_tooltip'), data: {toggle: 'tooltip', placement: 'top', html: 'true'}, class:'icon questionmark tip' %>
      	<br>
      	<%= t('.if_available') %>
      </th>
		</tr>
	</thead>
	<tbody>
		<%if templates.count == 0 && params[:q] %>
			<tr>
				<td colspan="4" style="text-align: center;"><%= t('.no_results') %></td>
			</tr>
		<%else%>
			<% templates.each do |t| %>
				<tr>
					<td><%= link_to t.name,	basic_requirements_template_path(t, format: :docx ), :target => '_blank' %>
							<%= link_to '', basic_requirements_template_path(t, format: :docx), :class => 'icon docx', :target => '_blank' %>
					</td>
					<td><%= (t.institution ? t.institution.full_name: '') %></td>
					<td>
						<% t.additional_informations.each do |info| %>
						<div class="samples">
							<%= link_to info.label, info.url, :target => '_blank' %>
						</div>
						<% end %>
					</td>
					<td>
						<% t.sample_plans.each do |s| %>
						<div class="samples">
							<%= link_to s.label, s.url, :target => '_blank' %>
							<%= link_to '', s.url, :class => 'icon pdf', :target => '_blank' %>
						</div>
						<% end %>
					</td>
				</tr>
			<% end %>
		<%end%>
	</tbody>
</table>

<%if templates.count == 0 && params[:q] %>
	<div></div>
<%else%>
	<% if @scope1 == "all" %>
		<div class="buttons pagination">
			<%= render_button_link t: '.view_less', href: {order_scope1: @order_scope1, scope1: '', s: @s, e: @e} %>
			<%= paginate @public_templates, {:param_name => 'public_guidance_page', order_scope1: @order_scope1} %>
		</div>
	<% else %>
		<div class="buttons pagination">
			<%= render_button_link t: '.view_all', href: {order_scope1: @order_scope1, scope1: 'all', s: @s, e: @e} %>
			<%= paginate @public_templates, {:param_name => 'public_guidance_page', order_scope1: @order_scope1} %>
		</div>
	<%end%>
<%end%>





