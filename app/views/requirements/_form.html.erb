<%= form_for ([@requirement.requirements_template, @requirement]), html: { :class => 'form-horizontal' } do |f| %>
  <%= render partial: "shared/errors", locals: {model: @requirement } %>
  <fieldset>
    <div class="control-group">
      <%= f.hidden_field :parent_id %>
      <%= f.check_box :group, id: 'if_group', style: 'display: none;' %>
    </div>
    <div class="control-group">
      <%= f.label :text_brief,
                  Requirement.human_attribute_name(:text_brief, group: params[:node_type].present?),
                  class: 'control-label required' %>
      <div class="controls">
        <%= f.text_field(:text_brief, :class => 'input-block-level', 'aria-required' => 'true') %>
      </div>
    </div>

    <% if params[:node_type] == 'group'%>
      <div class="control-group">
        <%= f.label :text_full, class: 'control-label' %>
        <div class="controls">
          <%= f.text_area(:text_full, rows: 5, :class => 'input-block-level') %>
        </div>
      </div>
    <% else %>
      <div class="control-group">
        <%= f.label :text_full, class: 'control-label required' %>
        <div class="controls">
          <%= f.text_area(:text_full, rows: 5, :class => 'input-block-level', 'aria-required' => 'true') %>
        </div>
      </div>
    <% end %>

    <div class="control-group" id="obligation">
      <p class="control-label">
        <%= content_tag :span, '', title: t('.obligation_tooltip_html'),
                        data: {toggle: 'tooltip', placement: 'right', html: 'true'},
                        class: 'icon questionmark tip' %>
        <%= Requirement.human_attribute_name(:obligation) %>
      </p>
      <div class="controls checkbox-controls">
        <%= f.radio_button :obligation, :mandatory, :class => 'radio inline', :id => 'mandatory'%>
        <%= label_tag :mandatory, t_enum(:enumeration, :obligation, :mandatory), class: 'radio-label' %>
        <br/>
        <%= f.radio_button :obligation, :mandatory_applicable, :class => 'radio inline', :id => 'mandatory_applicable'%>
        <%= label_tag :mandatory_applicable, t_enum(:enumeration, :obligation, :mandatory_applicable), class: 'radio-label' %>
        <br/>
        <%= f.radio_button :obligation, :recommended, :class => 'radio inline', :id => 'recommended' %>
        <%= label_tag :recommended, t_enum(:enumeration, :obligation, :recommended), class: 'radio-label' %>
        <br/>
        <% if params[:node_type] == 'group' && @requirement.new_record? %>
          <%= f.radio_button :obligation, :optional, :class => 'radio inline', :id => 'optional' %>
          <%= label_tag :optional, t_enum(:enumeration, :obligation, :optional), class: 'radio-label' %>
        <% elsif @requirement.new_record? %>
          <%= f.radio_button :obligation, :optional, checked: true, :class => 'radio inline', :id => 'optional' %>
          <%= label_tag :optional, t_enum(:enumeration, :obligation, :optional), class: 'radio-label' %>
        <% else %>
          <%= f.radio_button :obligation, :optional, :class => 'radio inline', :id => 'optional' %>
          <%= label_tag :optional, t_enum(:enumeration, :obligation, :optional), class: 'radio-label' %>
        <% end %>
      </div>
    </div>
    <div class="control-group">
      <%= f.label :requirement_type, class: 'control-label' %>
      <% if params[:node_type] == 'group'%>
        <div class="controls">
          <%= f.select :requirement_type, options_for_enum_select(attribute: :requirement_type) %>
          <%= content_tag :span, '', title: t('.group_type_tooltip_html'),
                          data: {toggle: 'tooltip', placement: 'top', html: 'true'},
                          class: 'icon questionmark tip' %>
        </div>
      <% else %>
        <div class="controls">
          <%= f.select :requirement_type, options_for_enum_select(@requirement, attribute: :requirement_type) %>
          <%= content_tag :span, '', title: t('.requirement_type_tooltip_html'),
                          data: {toggle: 'tooltip', placement: 'top', html: 'true'},
                          class: 'icon questionmark tip' %>
        </div>
      <% end %>
    </div>

    <fieldset class="requirement_type_enum">
      <%= f.fields_for :enumerations do |builder| %>
        <%= render 'enumeration_fields', f: builder %>
      <% end %>
      <%= link_to_add_fields t('.add_item_link'), f, :enumerations %>
    </fieldset>

    <fieldset class="requirement_type_numeric">
      <%= f.fields_for :labels do |builder| %>
        <%= render 'label_fields', f: builder %>
      <% end %>
    </fieldset>

  </fieldset>
  <div class="buttons">
    <%= render_submit_button t: '.save' %>
    <%= render_cancel_button id: 'cancel_button'%>
  </div>
<% end %>